!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).FormValidation=e.FormValidation||{})}(this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var r=function(){return(r=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};function t(e,r,t,n){return new(t||(t=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function u(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,u)}l((n=n.apply(e,r||[])).next())}))}function n(e,r){var t,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=r.call(e,i)}catch(e){a=[6,e],n=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function o(e){return Object.prototype.toString.call(e)}function a(e){return"[object Object]"===o(e)}function i(e){return"[object Array]"===o(e)}function u(e){return"function"==typeof e}function l(e){return null!==e&&"object"==typeof e&&u(e.then)}function c(e,r){return e.hasOwnProperty(r)}function s(e,r){if(0===r.length)return e;var t=e;return r.slice(0,-1).forEach((function(e){t=t[e]})),t[r[r.length-1]]}function f(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r]}var v="__form_validation__",d="__form_validation_reactive",h="__form_validation_collected",p=function(e,r,t){var n;(a(e)||i(e))&&Object.defineProperty(e,d,{enumerable:!1,configurable:!0,value:e}),(a(r)||i(r))&&(Object.defineProperty(r,d,{enumerable:!1,configurable:!0,value:r}),Object.defineProperty(r,v,{enumerable:!1,configurable:!0,value:r[v]||(n={},n.path=t,n)}),Object.defineProperty(r,"$v",{enumerable:!1,configurable:!0,value:r.$v||{}}))},$=function(e,r){var t;if(!1!==a(e)||!1!==i(e))for(var n in(t=e[v].path).splice.apply(t,function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),o=0;for(r=0;r<t;r++)for(var a=arguments[r],i=0,u=a.length;i<u;i++,o++)n[o]=a[i];return n}([0,r.length],r)),e)$(e[n],r.concat(n))},m=new Set(["shift","unshift","reverse","splice"]),y=function(e){var r=e.object,t=e.clone,n=e.path,o=void 0===n?[]:n,u=e.wrap,l=void 0===u?p:u,s=e.callback,f=void 0===s?function(){}:s;if(l(r,t,o),(a(t)||i(t))&&f(t),!1===a(r)&&!1===i(r))return r;for(var d=0,b=Object.keys(r);d<b.length;d++){var g=b[d];Reflect.set(t,g,t[g]||(i(r[g])?[]:{})),Reflect.set(r,g,y({object:r[g],clone:t[g],path:o.concat(g),wrap:l,callback:f}))}for(var g in t)!1===c(r,g)&&delete t[g];var j=null,O=0,P=0,k=[],w=[],_=[];return new Proxy(r,{deleteProperty:function(e,r){return Reflect.deleteProperty(t,r),Reflect.deleteProperty(e,r)},set:function(e,r,n){var a=Reflect.set(e,r,n);if(!1===c(e,r))return a;if(i(e))if("shift"===j){if("length"===r){k.reverse(),k.pop(),t.length=0;for(var u=0;u<k.length;){var s=k[u];s[v].path=s[v].path.slice(0,-1).concat(k.length-u-1+""),t.push(s),++u}for(var d in t.reverse(),j=null,$(t,t[v].path),t)f(t[d]);return a}/^\d+$/.test(r)&&(t[r]=i(n)?[]:{})}else if("unshift"===j){if("length"===r){t.length=0;for(var h=0;h<k.length;){var p=k[h];p[v].path=p[v].path.slice(0,-1).concat(k.length-h-1+""),t.push(p),++h}for(var m in t.reverse(),j=null,$(t,t[v].path),t)f(t[m]);return a}/^\d+$/.test(r)&&(t[r]=i(n)?[]:{},"0"===r&&k.push(t[0]))}else if("reverse"===j){if(/^\d+$/.test(r)){var b=k.pop();if(b[v].path=b[v].path.slice(0,-1).concat(r),t[r]=b,++P===O){for(var g in $(t,t[v].path),t)f(t[g]);j=null}return a}}else if("splice"===j){if("length"===r){for(var _ in j=null,t[r]=n,w){var x=w[_],R=x.method,I=x.key,S=x.value,z=parseInt(_,10)-1;"set"===R&&(z>=0&&"get"===w[z].method?t[I]=w[z].value:t[I]=S)}for(var D in $(t,t[v].path),t)t[D][v].path=t[D][v].path.slice(0,-1).concat(D+""),f(t[D]);return a}/^\d+$/.test(r)&&(t[r]=i(n)?[]:{},w.push({method:"set",key:r,value:t[r]}))}else if("length"===r)return t.length=n,a;return i(n)?(t[r]=t[r]||[],t[r].length=n.length):t[r]=t[r]||{},Reflect.set(e,r,y({object:n,clone:t[r],path:o.concat(r),wrap:l,callback:f}))},get:function(e,r){var n=Reflect.get(e,r);if(i(e))if(m.has(r))for(var o in j=r,P=0,k.length=0,w.length=0,_.length=0,t)delete t[o][h];else null!==j&&("shift"===j||"unshift"===j?/^\d+$/.test(r)&&t[r]&&void 0===t[r][h]&&(Object.defineProperty(t[r],h,{enumerable:!1,configurable:!0,value:t[r]}),k.push(t[r])):"reverse"===j?"length"===r?e[r]<=1?(j=null,O=0):O=n%2==0?n:n-1:/^\d+$/.test(r)&&t[r]&&void 0===t[r][h]&&(Object.defineProperty(t[r],h,{enumerable:!1,configurable:!0,value:t[r]}),k.push(t[r])):"splice"===j&&/^\d+$/.test(r)&&t[r]&&void 0===t[r][h]&&(Object.defineProperty(t[r],h,{enumerable:!1,configurable:!0,value:t[r]}),w.push({method:"get",key:r,value:t[r]})));return n}})},b=function(e){var r=e.rootSchema,t=e.validator,n=e.path,o=e.startIndex;if(o===n.length){try{var i=s(r,n);if(g(i))return a(i.$params)&&(t[v].schema.$params=i.$params),u(i.$normalizer)&&(t[v].schema.$normalizer=i.$normalizer),a(i.$rules)&&(t[v].schema.$rules=i.$rules),a(i.$errors)&&(t[v].schema.$errors=i.$errors),!0}catch(e){}return!1}if(b({rootSchema:r,validator:t,path:n,startIndex:o+1}))return!0;var l=n[o];return n[o]="$iter",!!b({rootSchema:r,validator:t,path:n,startIndex:o+1})||(n[o]=l,!1)},g=function(e){return void 0!==e&&(void 0!==e.$params||(void 0!==e.$normalizer||(void 0!==e.$rules||void 0!==e.$errors)))};var j=function(e){return function(r){e[v].validated=r}},O=function(e){return function(r){e[v].invalid=r}},P=function(e){return function(r){e[v].dirty=r}},k=function(e){return function(r){e[v].pending+=!0===r?1:-1}},w=function(e){return function(){e[v].pending=0}},_=function(e){return 0!==e[v].pending||D(e).some((function(e){return e.$v.pending}))},x=function(e){return e[v].invalid&&0===e[v].pending||D(e).some((function(e){return e.$v.invalid}))},R=function(e){return e[v].dirty||0!==D(e).length&&D(e).every((function(e){return e.$v.dirty}))},I=function(e){return e[v].dirty||D(e).some((function(e){return e.$v.anyDirty}))},S=function(e){return e[v].dirty&&e[v].invalid&&0===e[v].pending},z=function(e){return e[v].dirty&&e[v].invalid&&0===e[v].pending||D(e).some((function(e){return e.$v.anyError}))},D=function(e){return Object.keys(e).filter((function(e){return e!==v&&"$v"!==e})).map((function(r){return e[r]}))},V=function(e,o){var a=o[v].schema;o.$v.validate=function(){o[v].setValidated(!0),o[v].setInvalid(!1),o[v].resetPending(),o.$v.errors={},o[v].previousResult={};var i=function(e){for(var o,a,i=e.rootForm,u=e.validator,c=r(((o={}).$rules={},o),u[v].schema.$params),f=u[v].schema.$normalizer,d=u[v].schema.$rules,h=u[v].schema.$errors,p=i,$=u[v].path,m=0===$.length?void 0:s(i,$.slice(0,-1)),y=0===$.length?void 0:$[$.length-1],b=f({value:0===$.length?i:s(i,$),key:y,parent:m,path:$,root:p,params:c}),g=((a={}).$rules={},a),j=function(e){var r={value:b,key:y,parent:m,path:$,root:p,params:c},o=d[e](r);g.$rules[e]=o,r.params.$rules[e]=o,g[e]=void 0,l(o)?o.finally((function(){return t(void 0,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,o];case 1:return void 0!==t.sent()&&(g[e]=h[e](r)),[2]}}))}))})):void 0!==o&&(g[e]=h[e](r))},O=0,P=Object.keys(d);O<P.length;O++){j(P[O])}return g}({rootForm:e,validator:o});o[v].previousResult=i.$rules,i.$rules=o[v].previousResult;for(var u=function(e){l(i.$rules[e])?(o[v].setPending(!0),i.$rules[e].finally((function(){return t(void 0,void 0,void 0,(function(){var r,t;return n(this,(function(n){switch(n.label){case 0:return o[v].previousResult!==i.$rules?[2]:[4,i.$rules[e]];case 1:return void 0===n.sent()?[3,3]:(o[v].setInvalid(!0),r=o.$v.errors,t=e,[4,i[e]]);case 2:r[t]=n.sent(),n.label=3;case 3:return o[v].setPending(!1),[2]}}))}))}))):void 0!==i.$rules[e]&&(o[v].setInvalid(!0),o.$v.errors[e]=i[e])},c=0,f=Object.keys(a.$rules);c<f.length;c++){u(f[c])}for(var d={},h=0,p=Object.keys(o).filter((function(e){return"$v"!==e&&e!==v}));h<p.length;h++){var $=p[h];d[$]=o[$].$v.validate()}return Promise.all(Object.values(i.$rules)).then((function(){return Promise.all(Object.values(d))})).then((function(){}))},o.$v.reset=function(){o[v].setValidated(!1),o[v].setInvalid(!1),o[v].setDirty(!1),o[v].resetPending(),o[v].previousResult={},o.$v.errors={};for(var e=0,r=Object.keys(o).filter((function(e){return"$v"!==e&&e!==v}));e<r.length;e++){var t=r[e];o[t].$v.reset()}},o.$v.touch=function(){o[v].setDirty(!0);for(var e=0,r=Object.keys(o).filter((function(e){return"$v"!==e&&e!==v}));e<r.length;e++){var t=r[e];o[t].$v.touch()}}};e.proxy=function(e){var r=e.form,t=e.schema,n=e.validator;return y({object:r,clone:n,callback:function(e){!function(e){var r=e;void 0===r[v].invalid&&(r[v].invalid=!1,r[v].validated=!1,r[v].pending=0,r[v].dirty=!1,r[v].setValidated=j(r),r[v].setInvalid=O(r),r[v].setDirty=P(r),r[v].setPending=k(r),r[v].resetPending=w(r),Object.defineProperty(r.$v,"pending",{enumerable:!0,get:function(){return _(r)}}),Object.defineProperty(r.$v,"invalid",{enumerable:!0,get:function(){return x(r)}}),Object.defineProperty(r.$v,"dirty",{enumerable:!0,get:function(){return R(r)}}),Object.defineProperty(r.$v,"anyDirty",{enumerable:!0,get:function(){return I(r)}}),Object.defineProperty(r.$v,"error",{enumerable:!0,get:function(){return S(r)}}),Object.defineProperty(r.$v,"anyError",{enumerable:!0,get:function(){return z(r)}}),r.$v.errors={})}(e),function(e){var r=e.rootSchema,t=e.validator,n=t[v].path,o={$params:{},$normalizer:function(e){return e.value},$rules:{},$errors:{}};for(var a in t[v].schema=t[v].schema||{},t[v].schema.$params=o.$params,t[v].schema.$normalizer=o.$normalizer,t[v].schema.$rules=o.$rules,t[v].schema.$errors=o.$errors,b({rootSchema:r,validator:t,path:n.slice(),startIndex:0}),t[v].schema.$rules)void 0===t[v].schema.$errors[a]&&(t[v].schema.$errors[a]=f)}({rootSchema:t,validator:e}),V(r,e),e[v].validated&&e.$v.validate()}})},Object.defineProperty(e,"__esModule",{value:!0})}));
