!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).FormValidation=e.FormValidation||{})}(this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function n(e,n,r,t){return new(r||(r=Promise))((function(o,i){function a(e){try{u(t.next(e))}catch(e){i(e)}}function c(e){try{u(t.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?o(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,c)}u((t=t.apply(e,n||[])).next())}))}function r(e,n){var r,t,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(o=2&i[0]?t.return:i[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,i[1])).done)return o;switch(t=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],t=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function t(e){return Object.prototype.toString.call(e)}function o(e){return"[object Array]"===t(e)}function i(e){return null!==e&&"object"==typeof e&&function(e){return"function"==typeof e}(e.then)}function a(e,n){if(0===n.length)return e;var r=e;return n.slice(0,-1).forEach((function(e){r=r[e]})),r[n[n.length-1]]}function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]}var u="__form_validation__",l=function(e){var n=e.object,r=e.clone,i=e.path,a=e.callback;if(function(e,n,r){var t;if(void 0===e.__form_reactive)e[u]=((t={}).path=n,t.listener=[],t),e.$v={},Object.defineProperty(e,"__form_reactive",{enumerable:!1,value:e}),r(e)}(r,i,a),!1===function(e){return"[object Object]"===t(e)}(n)&&!1===o(n))return n;for(var c=0,s=Object.keys(n);c<s.length;c++){var f=s[c];Reflect.set(r,f,r[f]||(o(n)?[]:{})),n[f]=l({object:n[f],clone:r[f],path:i.concat(f),callback:a})}return new Proxy(n,{deleteProperty:function(e,n){Reflect.deleteProperty(r,n);for(var t=Reflect.deleteProperty(e,n),o=0,i=r[u].listener;o<i.length;o++){(0,i[o])(r[u].path.concat(n))}return t},set:function(e,n,t){var c=Reflect.set(e,n,t);Reflect.set(r,n,r[n]||(o(e)?[]:{})),t=l({object:t,clone:r[n],path:i.concat(n),callback:a});for(var s=0,f=r[u].listener;s<f.length;s++){(0,f[s])(r[u].path.concat(n))}return c}})},s={},f=function(e){return e.value},v={},d={};var h=function(e){return function(n){e[u].invalid=n,b(e),k(e),w(e)}},$=function(e){return function(n){e[u].dirty=n,g(e),j(e),k(e),w(e)}},p=function(e){return function(n){e[u].pending+=!0===n?1:-1,m(e),b(e),k(e),w(e)}},y=function(e){return function(){e[u].pending=0,m(e),b(e),k(e),w(e)}},m=function(e){e.$v.pending=0!==e[u].pending||P(e).some((function(e){return e.$v.pending}))},b=function(e){e.$v.invalid=e[u].invalid&&0===e[u].pending||P(e).some((function(e){return e.$v.invalid}))},g=function(e){e.$v.dirty=e[u].dirty||0!==P(e).length&&P(e).every((function(e){return e.$v.dirty}))},j=function(e){e.$v.anyDirty=e[u].dirty||P(e).some((function(e){return e.$v.anyDirty}))},k=function(e){e.$v.error=e[u].dirty&&e[u].invalid&&0===e[u].pending},w=function(e){e.$v.anyError=e[u].dirty&&e[u].invalid&&0===e[u].pending||P(e).some((function(e){return e.$v.anyError}))},P=function(e){return Object.keys(e).filter((function(e){return e!==u&&"$v"!==e})).map((function(n){return e[n]}))},R=function(e,t){var o=t[u].schema,c=null;t.$v.validate=function(){t[u].setInvalid(!1),t[u].resetPending(),t.$v.errors={},c=null;for(var l=function(e){for(var t,o=e.rootForm,c=e.validator,l=c[u].schema.$params,s=c[u].schema.$normalizer,f=c[u].schema.$rules,v=c[u].schema.$errors,d=o,h=c[u].path,$=0===h.length?void 0:a(o,h.slice(0,-1)),p=0===h.length?void 0:h[h.length-1],y=s({value:0===h.length?o:a(o,h),key:p,parent:$,path:h,root:d,params:l}),m=((t={}).$rulsResult={},t),b=function(e){var t={value:y,key:p,parent:$,path:h,root:d,params:l},o=f[e](t);m.$rulsResult[e]=o,m[e]=void 0,i(o)?o.finally((function(){return n(void 0,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,o];case 1:return void 0!==n.sent()&&(m[e]=v[e](t)),[2]}}))}))})):void 0!==o&&(m[e]=v[e](t))},g=0,j=Object.keys(f);g<j.length;g++){b(j[g])}return m}({rootForm:e,validator:t}),s=function(e){i(l.$rulsResult[e])?(t[u].setPending(!0),l.$rulsResult[e].finally((function(){return n(void 0,void 0,void 0,(function(){var n,o;return r(this,(function(r){switch(r.label){case 0:return c!==l.$rulsResult?[2]:[4,l.$rulsResult[e]];case 1:return void 0===r.sent()?[3,3]:(t[u].setInvalid(!0),n=t.$v.errors,o=e,[4,l[e]]);case 2:n[o]=r.sent(),r.label=3;case 3:return t[u].setPending(!1),[2]}}))}))}))):void 0!==l.$rulsResult[e]&&(t[u].setInvalid(!0),t.$v.errors[e]=l[e])},f=0,v=Object.keys(o.$rules);f<v.length;f++){s(v[f])}c=l.$rulsResult;for(var d=0,h=Object.keys(t).filter((function(e){return"$v"!==e&&e!==u}));d<h.length;d++){var $=h[d];t[$].$v.validate()}},t.$v.reset=function(){t[u].setInvalid(!1),t[u].setDirty(!1),t[u].resetPending(),t.$v.errors={},c=null;for(var e=0,n=Object.keys(t).filter((function(e){return"$v"!==e&&e!==u}));e<n.length;e++){var r=n[e];t[r].$v.reset()}},t.$v.touch=function(){t[u].setDirty(!0);for(var e=0,n=Object.keys(t).filter((function(e){return"$v"!==e&&e!==u}));e<n.length;e++){var r=n[e];t[r].$v.touch()}}};e.proxy=function(e){var n=e.form,r=e.schema,t=e.validator;return function(e){var n=e.object,r=e.clone,t=e.callback;return l({object:n,clone:r,path:[],callback:void 0===t?c:t})}({object:n,clone:t,callback:function(e){!function(e){var n=e;n[u].invalid=!1,n[u].pending=0,n[u].dirty=!1,n[u].setInvalid=h(n),n[u].setDirty=$(n),n[u].setPending=p(n),n[u].resetPending=y(n),n.$v.pending=!1,n.$v.invalid=!1,n.$v.dirty=!1,n.$v.anyDirty=!1,n.$v.error=!1,n.$v.anyError=!1,n.$v.errors={}}(e),function(e){var n,r=e.rootSchema,t=e.validator,o=t[u].path;if(t[u].schema=t[u].schema||{},t[u].schema.$params=s,t[u].schema.$normalizer=f,t[u].schema.$rules=v,t[u].schema.$errors=d,0!==o.length){try{n=a(r,o.slice(0,-1).concat("$iter"))}catch(e){}n&&(void 0!==n.$params&&(t[u].schema.$params=n.$params),void 0!==n.$normalizer&&(t[u].schema.$normalizer=n.$normalizer),void 0!==n.$rules&&(t[u].schema.$rules=n.$rules),void 0!==n.$errors&&(t[u].schema.$errors=n.$errors))}try{n=a(r,o)}catch(e){}n&&(void 0!==n.$params&&(t[u].schema.$params=n.$params),void 0!==n.$normalizer&&(t[u].schema.$normalizer=n.$normalizer),void 0!==n.$rules&&(t[u].schema.$rules=n.$rules),void 0!==n.$errors&&(t[u].schema.$errors=n.$errors))}({rootSchema:r,validator:e}),R(n,e)}})},Object.defineProperty(e,"__esModule",{value:!0})}));
