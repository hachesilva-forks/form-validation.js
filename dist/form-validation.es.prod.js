/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var e=function(){return(e=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};function r(e,r,t,n){return new(t||(t=Promise))((function(a,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function l(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var r;e.done?a(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,l)}u((n=n.apply(e,r||[])).next())}))}function t(e,r){var t,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=r.call(e,o)}catch(e){i=[6,e],n=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function n(e){return Object.prototype.toString.call(e)}function a(e){return"[object Object]"===n(e)}function i(e){return"[object Array]"===n(e)}function o(e){return"function"==typeof e}function l(e){return null!==e&&"object"==typeof e&&o(e.then)}function u(e,r){return e.hasOwnProperty(r)}function c(e,r){if(0===r.length)return e;var t=e;return r.slice(0,-1).forEach((function(e){t=t[e]})),t[r[r.length-1]]}function s(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r]}var f="__form_validation__",v="__form_validation_reactive",d="__form_validation_collected",h=function(e,r,t){var n;(a(e)||i(e))&&Object.defineProperty(e,v,{enumerable:!1,configurable:!0,value:e}),(a(r)||i(r))&&(Object.defineProperty(r,v,{enumerable:!1,configurable:!0,value:r}),Object.defineProperty(r,f,{enumerable:!1,configurable:!0,value:r[f]||(n={},n.path=t,n)}),Object.defineProperty(r,"$v",{enumerable:!1,configurable:!0,value:r.$v||{}}))},p=new Set(["shift","unshift","reverse","splice"]),$=function(e){var r=e.object,t=e.clone,n=e.path,o=void 0===n?[]:n,l=e.wrap,c=void 0===l?h:l,s=e.callback,v=void 0===s?function(){}:s;if(c(r,t,o),(a(t)||i(t))&&v(t),!1===a(r)&&!1===i(r))return r;for(var m=0,y=Object.keys(r);m<y.length;m++){var g=y[m];Reflect.set(t,g,t[g]||(i(r[g])?[]:{})),Reflect.set(r,g,$({object:r[g],clone:t[g],path:o.concat(g),wrap:c,callback:v}))}for(var g in t)!1===u(r,g)&&delete t[g];var b=null,j=0,O=0,P=[],k=[],w=[];return new Proxy(r,{deleteProperty:function(e,r){return Reflect.deleteProperty(t,r),Reflect.deleteProperty(e,r)},set:function(e,r,n){var a=Reflect.set(e,r,n);if(!1===u(e,r))return a;if(i(e))if("shift"===b){if("length"===r){P.reverse(),P.pop(),t.length=0;for(var l=0;l<P.length;){var s=P[l];s[f].path=s[f].path.slice(0,-1).concat(P.length-l-1+""),t.push(s),++l}for(var d in t.reverse(),b=null,t)v(t[d]);return a}/^\d+$/.test(r)&&(t[r]=i(n)?[]:{})}else if("unshift"===b){if("length"===r){t.length=0;for(var h=0;h<P.length;){var p=P[h];p[f].path=p[f].path.slice(0,-1).concat(P.length-h-1+""),t.push(p),++h}for(var m in t.reverse(),b=null,t)v(t[m]);return a}/^\d+$/.test(r)&&(t[r]=i(n)?[]:{},"0"===r&&P.push(t[0]))}else if("reverse"===b){if(/^\d+$/.test(r)){var y=P.pop();if(y[f].path=y[f].path.slice(0,-1).concat(r),t[r]=y,++O===j){for(var g in t)v(t[g]);b=null}return a}}else if("splice"===b){if("length"===r){for(var w in b=null,t[r]=n,k){var _=k[w],x=_.method,I=_.key,S=_.value,z=parseInt(w,10)-1;"set"===x&&(z>=0&&"get"===k[z].method?t[I]=k[z].value:t[I]=S)}for(var R in t)t[R][f].path=t[R][f].path.slice(0,-1).concat(R+""),v(t[R]);return a}/^\d+$/.test(r)&&(t[r]=i(n)?[]:{},k.push({method:"set",key:r,value:t[r]}))}return"length"===r?(t.length=n,a):(t[r]=t[r]||(i(n)?[]:{}),Reflect.set(e,r,$({object:n,clone:t[r],path:o.concat(r),wrap:c,callback:v})))},get:function(e,r){var n=Reflect.get(e,r);if(i(e))if(p.has(r))for(var a in b=r,O=0,P.length=0,k.length=0,w.length=0,t)delete t[a][d];else null!==b&&("shift"===b||"unshift"===b?/^\d+$/.test(r)&&t[r]&&void 0===t[r][d]&&(Object.defineProperty(t[r],d,{enumerable:!1,configurable:!0,value:t[r]}),P.push(t[r])):"reverse"===b?"length"===r?e[r]<=1?(b=null,j=0):j=n%2==0?n:n-1:/^\d+$/.test(r)&&t[r]&&void 0===t[r][d]&&(Object.defineProperty(t[r],d,{enumerable:!1,configurable:!0,value:t[r]}),P.push(t[r])):"splice"===b&&/^\d+$/.test(r)&&t[r]&&void 0===t[r][d]&&(Object.defineProperty(t[r],d,{enumerable:!1,configurable:!0,value:t[r]}),k.push({method:"get",key:r,value:t[r]})));return n}})},m=function(e){var r=e.rootSchema,t=e.validator,n=e.path,i=e.startIndex;if(i===n.length){try{var l=c(r,n);if(y(l))return a(l.$params)&&(t[f].schema.$params=l.$params),o(l.$normalizer)&&(t[f].schema.$normalizer=l.$normalizer),a(l.$rules)&&(t[f].schema.$rules=l.$rules),a(l.$errors)&&(t[f].schema.$errors=l.$errors),!0}catch(e){}return!1}if(m({rootSchema:r,validator:t,path:n,startIndex:i+1}))return!0;var u=n[i];return n[i]="$iter",!!m({rootSchema:r,validator:t,path:n,startIndex:i+1})||(n[i]=u,!1)},y=function(e){return void 0!==e&&(void 0!==e.$params||(void 0!==e.$normalizer||(void 0!==e.$rules||void 0!==e.$errors)))};var g=function(e){return function(r){e[f].validated=r}},b=function(e){return function(r){e[f].invalid=r,w(e),I(e),S(e)}},j=function(e){return function(r){e[f].dirty=r,_(e),x(e),I(e),S(e)}},O=function(e){return function(r){e[f].pending+=!0===r?1:-1,k(e),w(e),I(e),S(e)}},P=function(e){return function(){e[f].pending=0,k(e),w(e),I(e),S(e)}},k=function(e){e.$v.pending=0!==e[f].pending||z(e).some((function(e){return e.$v.pending}))},w=function(e){e.$v.invalid=e[f].invalid&&0===e[f].pending||z(e).some((function(e){return e.$v.invalid}))},_=function(e){e.$v.dirty=e[f].dirty||0!==z(e).length&&z(e).every((function(e){return e.$v.dirty}))},x=function(e){e.$v.anyDirty=e[f].dirty||z(e).some((function(e){return e.$v.anyDirty}))},I=function(e){e.$v.error=e[f].dirty&&e[f].invalid&&0===e[f].pending},S=function(e){e.$v.anyError=e[f].dirty&&e[f].invalid&&0===e[f].pending||z(e).some((function(e){return e.$v.anyError}))},z=function(e){return Object.keys(e).filter((function(e){return e!==f&&"$v"!==e})).map((function(r){return e[r]}))},R=function(e){var r=e.form,t=e.schema,n=e.validator;return $({object:r,clone:n,callback:function(e){!function(e){var r=e;void 0===r[f].invalid&&(r[f].invalid=!1,r[f].validated=!1,r[f].pending=0,r[f].dirty=!1,r[f].setValidated=g(r),r[f].setInvalid=b(r),r[f].setDirty=j(r),r[f].setPending=O(r),r[f].resetPending=P(r),r.$v.pending=!1,r.$v.invalid=!1,r.$v.dirty=!1,r.$v.anyDirty=!1,r.$v.error=!1,r.$v.anyError=!1,r.$v.errors={})}(e),function(e){var r=e.rootSchema,t=e.validator,n=t[f].path,a={$params:{},$normalizer:function(e){return e.value},$rules:{},$errors:{}};for(var i in t[f].schema=t[f].schema||{},t[f].schema.$params=a.$params,t[f].schema.$normalizer=a.$normalizer,t[f].schema.$rules=a.$rules,t[f].schema.$errors=a.$errors,m({rootSchema:r,validator:t,path:n.slice(),startIndex:0}),t[f].schema.$rules)void 0===t[f].schema.$errors[i]&&(t[f].schema.$errors[i]=s)}({rootSchema:t,validator:e}),D(r,e),e[f].validated&&e.$v.validate()}})},D=function(n,a){var i=a[f].schema,o={};a.$v.validate=function(){a[f].setValidated(!0),a[f].setInvalid(!1),a[f].resetPending(),a.$v.errors={},o={};for(var u=function(n){for(var a,i,o=n.rootForm,u=n.validator,s=e(((a={}).$rules={},a),u[f].schema.$params),v=u[f].schema.$normalizer,d=u[f].schema.$rules,h=u[f].schema.$errors,p=o,$=u[f].path,m=0===$.length?void 0:c(o,$.slice(0,-1)),y=0===$.length?void 0:$[$.length-1],g=v({value:0===$.length?o:c(o,$),key:y,parent:m,path:$,root:p,params:s}),b=((i={}).$rules={},i),j=function(e){var n={value:g,key:y,parent:m,path:$,root:p,params:s},a=d[e](n);b.$rules[e]=a,n.params.$rules[e]=a,b[e]=void 0,l(a)?a.finally((function(){return r(void 0,void 0,void 0,(function(){return t(this,(function(r){switch(r.label){case 0:return[4,a];case 1:return void 0!==r.sent()&&(b[e]=h[e](n)),[2]}}))}))})):void 0!==a&&(b[e]=h[e](n))},O=0,P=Object.keys(d);O<P.length;O++){j(P[O])}return b}({rootForm:n,validator:a}),s=function(e){l(u.$rules[e])?(a[f].setPending(!0),u.$rules[e].finally((function(){return r(void 0,void 0,void 0,(function(){var r,n;return t(this,(function(t){switch(t.label){case 0:return o!==u.$rules?[2]:[4,u.$rules[e]];case 1:return void 0===t.sent()?[3,3]:(a[f].setInvalid(!0),r=a.$v.errors,n=e,[4,u[e]]);case 2:r[n]=t.sent(),t.label=3;case 3:return a[f].setPending(!1),[2]}}))}))}))):void 0!==u.$rules[e]&&(a[f].setInvalid(!0),a.$v.errors[e]=u[e])},v=0,d=Object.keys(i.$rules);v<d.length;v++){s(d[v])}o=u.$rules;for(var h={},p=0,$=Object.keys(a).filter((function(e){return"$v"!==e&&e!==f}));p<$.length;p++){var m=$[p];h[m]=a[m].$v.validate()}return Promise.all(Object.values(o)).then((function(){return Promise.all(Object.values(h))})).then((function(){}))},a.$v.reset=function(){a[f].setValidated(!1),a[f].setInvalid(!1),a[f].setDirty(!1),a[f].resetPending(),a.$v.errors={},o={};for(var e=0,r=Object.keys(a).filter((function(e){return"$v"!==e&&e!==f}));e<r.length;e++){var t=r[e];a[t].$v.reset()}},a.$v.touch=function(){a[f].setDirty(!0);for(var e=0,r=Object.keys(a).filter((function(e){return"$v"!==e&&e!==f}));e<r.length;e++){var t=r[e];a[t].$v.touch()}}};export{R as proxy};
